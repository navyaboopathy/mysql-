DROP TABLE IF EXISTS Employee;
DROP TABLE IF EXISTS Department;

CREATE TABLE Department (
    dept_id INT PRIMARY KEY,
    dept_name VARCHAR(50)
);


CREATE TABLE Employee (
    emp_id INT PRIMARY KEY,
    emp_name VARCHAR(50),
    salary INT,
    dept_id INT,
    FOREIGN KEY (dept_id) REFERENCES Department(dept_id)
);


INSERT INTO Department VALUES (1, 'HR'), (2, 'IT'), (3, 'Finance');

INSERT INTO Employee VALUES 
(101, 'Alice', 50000, 1),
(102, 'Bob', 60000, 2),
(103, 'Charlie', 70000, 2),
(104, 'David', 55000, 3);

DELIMITER $$

CREATE FUNCTION GetSalary(empId INT) 
RETURNS INT
DETERMINISTIC
BEGIN
    DECLARE empSalary INT;
    SELECT salary INTO empSalary 
    FROM Employee 
    WHERE emp_id = empId;
    RETURN empSalary;
END$$

CREATE PROCEDURE IncreaseSalaryByDept(
    IN deptId INT,
    IN percent_increase DECIMAL(5,2)
)
BEGIN
    UPDATE Employee
    SET salary = salary + (salary * percent_increase / 100)
    WHERE dept_id = deptId;
END$$

DELIMITER ;
SELECT GetSalary(102) AS SalaryOfBob;

CALL IncreaseSalaryByDept(2, 10);  -- Increases salary by 10% for IT dept


SELECT * FROM Employee;
